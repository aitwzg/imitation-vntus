<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            height: 150px;
            line-height: 150px;
            text-align: center;
            color: #fff;
            background-color: #ccc;
            font-size: 80px;
        }
    </style>
</head>

<body>
    <div id="content"></div>

    <p>点击</p>
    <script>
        // let num = 1;
        // const content = document.getElementById('content');
        // function count() {
        //     content.innerHTML = num++;
        // };
        // content.onmousemove = count;

        let num = 1;
        const content = document.getElementById('content');
        // 功能函数
        function count() {
            this.innerHTML = num++;
        };


        // content.onclick = debounce(count, 1000);

        content.addEventListener('click',debounce(1000))

        // console.log(content.onclick);
        // 防抖函数，非立即执行版本
        function debounce(wait) {
            let timeout;
            console.log(1111);
            return function () {
                // const context = this;
                // console.log(this);
                // const args = [...arguments];
                // console.log(args);
                // console.log(timeout);
                if (timeout) clearTimeout(timeout);
                timeout = setTimeout(() => {
                    // func.apply(context)
                    // console.log(1111);
                }, wait);
            }
        }

        // function debounce(func, wait) {
        //     let timeout;
        //     return function () {
        //         const context = this;
        //         // console.log(this);
        //         // const args = [...arguments];
        //         console.log(args);
        //         if (timeout) clearTimeout(timeout);
        //         timeout = setTimeout(() => {
        //             func.apply(context, args)
        //         }, wait);
        //     }
        // }

        // p = document.querySelector('p');
        // p.onclick= function(e){
        //     console.log(e);
        // }

        // 防抖函数，立即执行版本
        function debounce(func, wait) {
            let timeout;
            return function () {
                const context = this;
                console.log(this);
                const args = [...arguments];
                if (timeout) clearTimeout(timeout);
                console.log(timeout);
                const callNow = !timeout;
                timeout = setTimeout(() => {
                    timeout = null;
                }, wait);
                if (callNow) func.apply(context, args);
            };
        }


    </script>


</body>



</html>